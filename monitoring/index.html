<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Monitoring - Spacebox docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Monitoring";
        var mkdocs_page_input_path = "monitoring.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Spacebox docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../setup/">Getting started</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Monitoring</a>
    <ul class="current">
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../neutron/">Neutron network</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Spacebox docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Monitoring</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="spacebox-monitoring">Spacebox monitoring</h1>
<p>Spacebox supports text-based metrics, compatible with <a href="https://github.com/prometheus/prometheus">Prometheus</a>. Port is mapped to the localhost in default docker-compose configuration, and could be configured in <code>.env</code>:</p>
<pre><code class="language-bash"># Metrics settings
METRICS_ENABLED=true # Metrics enabled
SERVER_PORT=2112 # Metrics server port
</code></pre>
<p>To make it appear in Prometheus, launch crawler add a new target to your prometheus.yml, and restart Prometheus:</p>
<pre><code class="language-bash">  - job_name: 'spacebox-crawler'
    scrape_interval: 5s
    static_configs:
      - targets: ['localhost:2112']
</code></pre>
<p>An example of the Grafana dashboard can be found <a href="../spacebox_grafana_sample.json">here</a>. To make this board fully functional it's necessary to install <a href="https://grafana.com/grafana/plugins/grafana-clickhouse-datasource/">ClickHouse plugin</a> to Grafana.</p>
<p>List of the supported metrics with some sample values:</p>
<pre><code class="language-bash"># HELP client_api_requests_total A counter for requests from the wrapped client.
# TYPE client_api_requests_total counter
client_api_requests_total{code=&quot;200&quot;,method=&quot;post&quot;} 235915
# HELP client_in_flight_requests A gauge of in-flight requests for the wrapped client.
# TYPE client_in_flight_requests gauge
client_in_flight_requests 0
# HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.
# TYPE go_gc_duration_seconds summary
go_gc_duration_seconds{quantile=&quot;*&quot;} 0.00013202
go_gc_duration_seconds_sum 569.665748093
go_gc_duration_seconds_count 320180
# HELP go_goroutines Number of goroutines that currently exist.
# TYPE go_goroutines gauge
go_goroutines 144
# HELP go_info Information about the Go environment.
# TYPE go_info gauge
go_info{version=&quot;go1.22.4&quot;} 1
# HELP go_memstats_alloc_bytes Number of bytes allocated and still in use.
# TYPE go_memstats_alloc_bytes gauge
go_memstats_alloc_bytes 3.5313344e+08
# HELP go_memstats_alloc_bytes_total Total number of bytes allocated, even if freed.
# TYPE go_memstats_alloc_bytes_total counter
go_memstats_alloc_bytes_total 1.49838467006912e+14
# HELP go_memstats_buck_hash_sys_bytes Number of bytes used by the profiling bucket hash table.
# TYPE go_memstats_buck_hash_sys_bytes gauge
go_memstats_buck_hash_sys_bytes 7.119855e+06
# HELP go_memstats_frees_total Total number of frees.
# TYPE go_memstats_frees_total counter
go_memstats_frees_total 2.228701493759e+12
# HELP go_memstats_gc_sys_bytes Number of bytes used for garbage collection system metadata.
# TYPE go_memstats_gc_sys_bytes gauge
go_memstats_gc_sys_bytes 4.607688e+07
# HELP go_memstats_heap_alloc_bytes Number of heap bytes allocated and still in use.
# TYPE go_memstats_heap_alloc_bytes gauge
go_memstats_heap_alloc_bytes 3.5313344e+08
# HELP go_memstats_heap_idle_bytes Number of heap bytes waiting to be used.
# TYPE go_memstats_heap_idle_bytes gauge
go_memstats_heap_idle_bytes 3.821551616e+09
# HELP go_memstats_heap_inuse_bytes Number of heap bytes that are in use.
# TYPE go_memstats_heap_inuse_bytes gauge
go_memstats_heap_inuse_bytes 3.74980608e+08
# HELP go_memstats_heap_objects Number of allocated objects.
# TYPE go_memstats_heap_objects gauge
go_memstats_heap_objects 4.765757e+06
# HELP go_memstats_heap_released_bytes Number of heap bytes released to OS.
# TYPE go_memstats_heap_released_bytes gauge
go_memstats_heap_released_bytes 3.750273024e+09
# HELP go_memstats_heap_sys_bytes Number of heap bytes obtained from system.
# TYPE go_memstats_heap_sys_bytes gauge
go_memstats_heap_sys_bytes 4.196532224e+09
# HELP go_memstats_last_gc_time_seconds Number of seconds since 1970 of last garbage collection.
# TYPE go_memstats_last_gc_time_seconds gauge
go_memstats_last_gc_time_seconds 1.726229858651255e+09
# HELP go_memstats_lookups_total Total number of pointer lookups.
# TYPE go_memstats_lookups_total counter
go_memstats_lookups_total 0
# HELP go_memstats_mallocs_total Total number of mallocs.
# TYPE go_memstats_mallocs_total counter
go_memstats_mallocs_total 2.228706259516e+12
# HELP go_memstats_mcache_inuse_bytes Number of bytes in use by mcache structures.
# TYPE go_memstats_mcache_inuse_bytes gauge
go_memstats_mcache_inuse_bytes 105600
# HELP go_memstats_mcache_sys_bytes Number of bytes used for mcache structures obtained from system.
# TYPE go_memstats_mcache_sys_bytes gauge
go_memstats_mcache_sys_bytes 109200
# HELP go_memstats_mspan_inuse_bytes Number of bytes in use by mspan structures.
# TYPE go_memstats_mspan_inuse_bytes gauge
go_memstats_mspan_inuse_bytes 5.52096e+06
# HELP go_memstats_mspan_sys_bytes Number of bytes used for mspan structures obtained from system.
# TYPE go_memstats_mspan_sys_bytes gauge
go_memstats_mspan_sys_bytes 6.190176e+07
# HELP go_memstats_next_gc_bytes Number of heap bytes when next garbage collection will take place.
# TYPE go_memstats_next_gc_bytes gauge
go_memstats_next_gc_bytes 4.86296432e+08
# HELP go_memstats_other_sys_bytes Number of bytes used for other system allocations.
# TYPE go_memstats_other_sys_bytes gauge
go_memstats_other_sys_bytes 1.5349049e+07
# HELP go_memstats_stack_inuse_bytes Number of bytes in use by the stack allocator.
# TYPE go_memstats_stack_inuse_bytes gauge
go_memstats_stack_inuse_bytes 1.0354688e+07
# HELP go_memstats_stack_sys_bytes Number of bytes obtained from system for stack allocator.
# TYPE go_memstats_stack_sys_bytes gauge
go_memstats_stack_sys_bytes 1.0354688e+07
# HELP go_memstats_sys_bytes Number of bytes obtained from system.
# TYPE go_memstats_sys_bytes gauge
go_memstats_sys_bytes 4.337443656e+09
# HELP go_threads Number of OS threads created.
# TYPE go_threads gauge
go_threads 100
# HELP grpc_client_handled_total Total number of RPCs completed by the client, regardless of success or failure.
# TYPE grpc_client_handled_total counter
grpc_client_handled_total{grpc_code=&quot;OK&quot;,grpc_method=&quot;*&quot;,grpc_service=&quot;*&quot;,grpc_type=&quot;unary&quot;} 117957
# HELP grpc_client_handling_seconds Histogram of response latency (seconds) of the gRPC until it is finished by the application.
# TYPE grpc_client_handling_seconds histogram
grpc_client_handling_seconds_bucket{grpc_method=&quot;*&quot;,grpc_service=&quot;*&quot;,grpc_type=&quot;unary&quot;,le=&quot;0.005&quot;} 0
grpc_client_handling_seconds_sum{grpc_method=&quot;*&quot;,grpc_service=&quot;*&quot;,grpc_type=&quot;unary&quot;} 1704.9106808000047
grpc_client_handling_seconds_count{grpc_method=&quot;*&quot;,grpc_service=&quot;*&quot;,grpc_type=&quot;unary&quot;} 117957
# HELP grpc_client_msg_received_total Total number of RPC stream messages received by the client.
# TYPE grpc_client_msg_received_total counter
grpc_client_msg_received_total{grpc_method=&quot;*&quot;,grpc_service=&quot;*&quot;,grpc_type=&quot;unary&quot;} 117957
# HELP grpc_client_msg_sent_total Total number of gRPC stream messages sent by the client.
# TYPE grpc_client_msg_sent_total counter
grpc_client_msg_sent_total{grpc_method=&quot;*&quot;,grpc_service=&quot;*&quot;,grpc_type=&quot;unary&quot;} 117957
# HELP grpc_client_started_total Total number of RPCs started on the client.
# TYPE grpc_client_started_total counter
grpc_client_started_total{grpc_method=&quot;*&quot;,grpc_service=&quot;*&quot;,grpc_type=&quot;unary&quot;} 117957
# HELP mongo_commands Histogram of MongoDB commands
# TYPE mongo_commands histogram
mongo_commands_bucket{command=&quot;*&quot;,instance=&quot;*&quot;,le=&quot;*&quot;} 6706
mongo_commands_sum{command=&quot;*&quot;,instance=&quot;*&quot;} 46649.20434609119
mongo_commands_count{command=&quot;*&quot;,instance=&quot;*&quot;} 13632
# HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.
# TYPE process_cpu_seconds_total counter
process_cpu_seconds_total 3.77212593e+06
# HELP process_max_fds Maximum number of open file descriptors.
# TYPE process_max_fds gauge
process_max_fds 1.048576e+06
# HELP process_open_fds Number of open file descriptors.
# TYPE process_open_fds gauge
process_open_fds 36
# HELP process_resident_memory_bytes Resident memory size in bytes.
# TYPE process_resident_memory_bytes gauge
process_resident_memory_bytes 5.58522368e+08
# HELP process_start_time_seconds Start time of the process since unix epoch in seconds.
# TYPE process_start_time_seconds gauge
process_start_time_seconds 1.72552562346e+09
# HELP process_virtual_memory_bytes Virtual memory size in bytes.
# TYPE process_virtual_memory_bytes gauge
process_virtual_memory_bytes 5.791121408e+09
# HELP process_virtual_memory_max_bytes Maximum amount of virtual memory available in bytes.
# TYPE process_virtual_memory_max_bytes gauge
process_virtual_memory_max_bytes 1.8446744073709552e+19
# HELP promhttp_metric_handler_requests_in_flight Current number of scrapes being served.
# TYPE promhttp_metric_handler_requests_in_flight gauge
promhttp_metric_handler_requests_in_flight 1
# HELP promhttp_metric_handler_requests_total Total number of scrapes by HTTP status code.
# TYPE promhttp_metric_handler_requests_total counter
promhttp_metric_handler_requests_total{code=&quot;*&quot;} 140841
# HELP request_duration_seconds A histogram of request latencies.
# TYPE request_duration_seconds histogram
request_duration_seconds_bucket{method=&quot;post&quot;,le=&quot;*&quot;} 1
request_duration_seconds_sum{method=&quot;post&quot;} 5616.343836235997
request_duration_seconds_count{method=&quot;post&quot;} 235915
# HELP spacebox_crawler_blocks_by_status Total blocks for each status
# TYPE spacebox_crawler_blocks_by_status gauge
spacebox_crawler_blocks_by_status{status=&quot;error&quot;} 1.046201e+06
spacebox_crawler_blocks_by_status{status=&quot;processed&quot;} 1.6964531e+07
spacebox_crawler_blocks_by_status{status=&quot;processing&quot;} 0
# HELP spacebox_crawler_last_processed_block_height Last processed block height
# TYPE spacebox_crawler_last_processed_block_height gauge
spacebox_crawler_last_processed_block_height 2.216532e+07
# HELP spacebox_crawler_process_duration Duration of parsed blockchain objects
# TYPE spacebox_crawler_process_duration histogram
spacebox_crawler_process_duration_bucket{type=&quot;*&quot;,le=&quot;*&quot;} 117957
spacebox_crawler_process_duration_sum{type=&quot;*&quot;} 0.48113770700000247
spacebox_crawler_process_duration_count{type=&quot;*&quot;} 117957
# HELP spacebox_crawler_start_height Start height for processing
# TYPE spacebox_crawler_start_height gauge
spacebox_crawler_start_height 1.8e+07
# HELP spacebox_crawler_stop_height Stop height for processing
# TYPE spacebox_crawler_stop_height gauge
spacebox_crawler_stop_height 2.2047366e+07
# HELP spacebox_crawler_total_error_messages Total error messages
# TYPE spacebox_crawler_total_error_messages gauge
spacebox_crawler_total_error_messages 0
# HELP spacebox_crawler_total_error_txs Total error txs
# TYPE spacebox_crawler_total_error_txs gauge
spacebox_crawler_total_error_txs 6.719612e+06
# HELP spacebox_crawler_total_workers Count of workers
# TYPE spacebox_crawler_total_workers gauge
spacebox_crawler_total_workers 5
# HELP spacebox_crawler_version Crawler version
# TYPE spacebox_crawler_version gauge
spacebox_crawler_version{version=&quot;v2.0.0&quot;} 1
# HELP spacebox_crawler_worker_recovery_mode Is worker recovery mode enabled
# TYPE spacebox_crawler_worker_recovery_mode gauge
spacebox_crawler_worker_recovery_mode 0
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../setup/" class="btn btn-neutral float-left" title="Getting started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../neutron/" class="btn btn-neutral float-right" title="Neutron network">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../setup/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../neutron/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
